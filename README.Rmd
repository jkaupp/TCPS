---
output: github_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  warnings = FALSE,
  messages = FALSE
)
```
# Teaching Culture Perception Survey (TCPS) Project

The goal of tcps package is to provide functionality to tidy and visualize the results of running the teaching culture perception survey at an institution.

## Installation

You can install tcps from GitHub with:

```{r gh-installation, eval = FALSE}
# install.packages("devtools")
devtools::install_github("jkaupp/tcps")
```

## Using this package

At this point, the survey data is provided to institutions by contacting the Project Committee.  Data is provided to the instiution in the form of an SPSS file that contains all raw data, plus statistics and calculated levers.  The `tidy_tcps` function would be used in this case to clean up the file for plotting and other downstream analysis. It is difficult to show here as the SPSS files are unavailble to be shared due to institutional ethics clearance.

However, to show the output for `tidy_tcps` and to illustrate the plotting functions, a  simulated data set was created.

```{r example}
data("tcps_sample")

head(tcps_sample)

```

# Visualizations

## Ridgeline plots of levers

The primary visualization for the 6 levers in the survey is a [ridgeline plot](http://blog.revolutionanalytics.com/2017/07/joyplots.html) that illustrates the distribution of the lever scores for each respondent for both agreement and importance.  The arguments to the function are:
 * `x` = tidy tcps data
 * `lever` = optional lever selection as a string
 * `pal` = length two vector of RGB hex colors (pal_one, pal_two, pal_three are supplied in the package)
 * `aggregate` = boolean TRUE/FALSE.  If TRUE, it aggregates responses across all surveys present in the data (faculty, staff, student). If false it presents as a grid for each survey.

```{r ridgeline}
library(tcps)
lever_ridgeline(tcps_sample)
```

You plot a single ridgeline by using the shortname for the lever as a string.  The shortnames and corresponding lever titles are available via `.levers`
```{r single_ridgeline}
lever_ridgeline(tcps_sample, lever = "instinit", pal = pal_two)
```

# Plotting Scale Items

The distributions of each question comprising a scale can also be visualized as a stacked bar chart, disaplying the percentage of responses in each category.  

```{r likert, fig.height = 10}
lever_scale(tcps_sample, "instinit")
```


